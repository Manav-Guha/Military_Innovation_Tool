<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Military Innovation Assessment Framework</title>

  <!-- React + Babel -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js" data-presets="react"></script>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    .big-tabs{display:flex;align-items:center;justify-content:center;gap:1rem;margin:1.5rem 0}
    .big-tab{padding:.9rem 1.75rem;border-radius:1rem;font-weight:600;border:1px solid;transition:all .2s}
    .big-tab-inactive{background:#f3f4f6;border-color:#d1d5db;color:#374151}
    .big-tab-inactive:hover{background:#e5e7eb}
    .big-tab-active{background:#fff;border-color:#2563eb;color:#1d4ed8;box-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1)}
    .panel{background:#fff;border:1px solid #e5e7eb;border-radius:1rem}
    .panel-h{padding:.9rem 1.25rem;border-bottom:1px solid #e5e7eb;font-weight:600}
    .panel-b{padding:1.25rem}
    .hint{font-size:.85rem;color:#6b7280}
    .item-row{padding:.6rem 0;border-bottom:1px solid #eef2f7}
    .item-row:last-child{border-bottom:none}
    .badge{display:inline-block;padding:.125rem .5rem;border-radius:.375rem;font-size:.75rem;font-weight:600}
    .meter{height:.5rem;background:#e5e7eb;border-radius:.375rem;overflow:hidden}
    .meter-fill{height:100%;background:#2563eb}
  </style>
</head>
<body class="bg-gray-50 text-gray-900">
  <div id="root" class="max-w-7xl mx-auto p-6"></div>

  <script type="text/babel">
    const {useState,useMemo,useEffect,useRef} = React;

    // ===== Dimensions (C/I/D/G) =====
    const DIMS = [
      { key:"Cognitive",        abbr:"C", label:"Cognitive (C)",             def:"Doctrine, training, and mental models change to accommodate the novelty." },
      { key:"Irreversibility",  abbr:"I", label:"Irreversibility (I)",       def:"Prior doctrine ceases to be viable as decisive practice; no rational return." },
      { key:"Disruption",       abbr:"D", label:"Disruptive Capacity (D)",   def:"Adversaries are compelled to abandon or radically alter existing methods." },
      { key:"Generative",       abbr:"G", label:"Generative Capacity (G)",   def:"The change enables new capabilities or follow-on innovations." }
    ];
    const ORDER = DIMS.map(d=>d.key);

    // ===== Sub-indicator scaffold (4 per dimension) =====
    const SUBS = {
      Disruption: [
        {k:"d1", name:"Enemy OODA disruption", hint:"Throws off observe–orient–decide–act."},
        {k:"d2", name:"Doctrinal breakpoints", hint:"Existing doctrine becomes obsolete."},
        {k:"d3", name:"Shift in kill-chain topology", hint:"Changes find–fix–finish sequence."},
        {k:"d4", name:"Adversary scrambles to counter", hint:"Forces urgent, costly counters."},
      ],
      Irreversibility: [
        {k:"i1", name:"Sunk training pipelines", hint:"Deep, long-term training investments."},
        {k:"i2", name:"Logistics path dependence", hint:"New supply/infrastructure dependencies."},
        {k:"i3", name:"Adversary compulsion to mirror", hint:"Competitors must adopt to keep up."},
        {k:"i4", name:"Force-structure changes", hint:"Permanent unit/TOE reconfiguration."},
      ],
      Cognitive: [
        {k:"c1", name:"Assumption reversal", hint:"Core premises visibly overturned."},
        {k:"c2", name:"PME/doctrine rewrite", hint:"Syllabi and doctrine revised."},
        {k:"c3", name:"Wargame result shifts", hint:"Different outcomes under same scenarios."},
        {k:"c4", name:"New success metrics", hint:"Victory assessed with new measures."},
      ],
      Generative: [
        {k:"g1", name:"New capability families", hint:"Spawns adjacent capability lines."},
        {k:"g2", name:"Cross-domain spillovers", hint:"Transfers into other domains."},
        {k:"g3", name:"Budget reallocation", hint:"Sustained ≥10% shift for ≥2 FYs."},
        {k:"g4", name:"Conceptual platform", hint:"Base enabling further innovations."},
      ]
    };

    // ===== Core logic =====
    const meanToInt = arr => Math.round(arr.reduce((a,v)=>a+v,0)/arr.length);
    const thresholdOK = s => (s.Cognitive||0) >= 2 && (s.Irreversibility||0) >= 2;
    const indexScore = s => Math.round(25 * ORDER.reduce((a,k)=> a + (+s[k]||0), 0) / 4);
    function classify(s){
      const vals = ORDER.map(k => +s[k]||0);
      if (!thresholdOK(s)) return vals.some(v=>v>=2) ? "Modernization" : "Upgradation";
      const strong = vals.filter(v=>v>=3).length;
      if (strong >= 3) return "Transformational Innovation";
      if (strong >= 2) return "Innovation";
      return "Modernization";
    }

    // ===== Full Historical Examples (C/I/D/G) =====
    // Note: If a case lacks "sub" arrays, sub-sliders are shown locked with the dimension score replicated across the 4 items.
    const EXAMPLES = {
      "AI-Targeting": {
        scores: { Cognitive:1, Irreversibility:1, Disruption:1, Generative:2 },
        justification: "**Modernization**. AI-targeting speeds up existing processes but doesn't fundamentally change how war is fought. Limited organizational changes and minimal shift in military thinking.",
        sources: ["USAF Mad Scientist Initial Research"]
      },
      "AIP Submarine": {
        scores: { Cognitive:1, Irreversibility:2, Disruption:1, Generative:2 },
        justification: "**Modernization**. AIP extends submarine endurance and creates new patrol capabilities beyond mere performance upgrade. Requires institutional adaptation to new operational patterns and resource allocation shifts. However, operates within existing submarine warfare paradigms without fundamental strategic reconceptualization.",
        sources: ["Norman Polmar & K.J. Moore, Cold War Submarines (2004)"]
      },
      "ASBM": {
        scores: { Cognitive:3, Irreversibility:2, Disruption:3, Generative:2 },
        justification: "**Genuine Innovation**. ASBMs force navies to completely rethink carrier operations and power projection. Creates fundamental shifts in naval strategy and planning.",
        sources: ["Andrew S. Erickson, Chinese Anti-Ship Ballistic Missile Development (2013)"]
      },
      "Barbed Wire": {
        scores: { Cognitive:3, Irreversibility:3, Disruption:3, Generative:2 },
        justification: "**Genuine Innovation**. Barbed wire made existing offensive operational assumptions untenable, forcing fundamental revision of tactical frameworks. Created institutional resistance to reversion to linear tactics and opened conceptual space for defensive warfare thinking.",
        sources: ["Stephen Bull, The Soldier's Kit: The British Army on the Western Front 1914-1918 (2013)"]
      },
      "Blitzkrieg": {
        scores: { Cognitive:4, Irreversibility:3, Disruption:4, Generative:4 },
        justification: "**Genuine Innovation**. Blitzkrieg completely transformed land warfare, became irreversible standard, spawned numerous follow-on innovations, and forced fundamental rethinking of military strategy.",
        sources: ["Liddell Hart on Blitzkrieg", "Guderian's Panzer Leader"]
      },
      "Carrier Aviation": {
        scores: { Cognitive:4, Irreversibility:4, Disruption:4, Generative:4 },
        justification: "**Genuine Innovation**. Carrier aviation achieved complete paradigmatic transformation. Battleship-centric operational assumptions became untenable, organizational DNA permanently altered through aviation-naval integration, transcended original domain to enable global power projection concepts.",
        sources: ["Norman Friedman, U.S. Aircraft Carriers: An Illustrated Design History (1983)"]
      },
      "Cyber Warfare": {
        scores: { Cognitive:2, Irreversibility:2, Disruption:2, Generative:3 },
        justification: "**Modernization**. Cyber warfare creates new operational domains but does not fundamentally challenge existing strategic logic. While catalytic in opening new conceptual spaces, it operates alongside rather than replacing traditional paradigms.",
        sources: ["Martin C. Libicki, Conquest in Cyberspace: A New Kind of War (2012)"]
      },
      "Deep Battle/Reconnaissance Strike Complex": {
        scores: { Cognitive:4, Irreversibility:3, Disruption:4, Generative:3 },
        justification: "**Genuine Innovation**. Deep Battle doctrine made frontal assault assumptions untenable and demanded strategic logic reconceptualization. Created institutional resistance to reversion to linear operations and opened conceptual space for operational art thinking.",
        sources: ["Mary Habeck, Storm of Steel: The Development of Soviet Operational Art (2003)"]
      },
      "F-16 Block D": {
        scores: { Cognitive:0, Irreversibility:1, Disruption:0, Generative:1 },
        justification: "**Upgradation**. Block upgrades enhance performance within existing air superiority paradigms without challenging operational assumptions. No strategic reconceptualization or conceptual disruption—simply improved execution of established concepts.",
        sources: ["U.S. Air Force Fact Sheets"]
      },
      "Hypersonics": {
        scores: { Cognitive:1, Irreversibility:1, Disruption:1, Generative:2 },
        justification: "**Modernization**. Hypersonics accelerate existing missile paradigms without fundamentally challenging strategic assumptions about deterrence or operational concepts. Limited conceptual disruption and minimal strategic reconceptualization evidence.",
        sources: ["Thomas G. Mahnken, The Technological Revolution in Military Affairs (2007)"]
      },
      "Information Warfare": {
        scores: { Cognitive:3, Irreversibility:3, Disruption:3, Generative:4 },
        justification: "**Genuine Innovation**. Information warfare challenges operational assumptions about command and control, creates institutional resistance to reversion to hierarchical communication, and transcends original domains to influence political-military boundaries.",
        sources: ["T. E. Ricks, The Generals: American Military Command from World War II to Today (2012)"]
      },
      "Lasers": {
        scores: { Cognitive:1, Irreversibility:1, Disruption:2, Generative:2 },
        justification: "**Modernization**. Directed energy systems challenge some defensive assumptions but operate within existing paradigmatic frameworks. Limited institutional embedding and strategic reconceptualization evidence.",
        sources: ["Air Force Research Laboratory, Directed Energy Weapons: A Primer (2019)"]
      },
      "Machine Gun": {
        scores: { Cognitive:4, Irreversibility:4, Disruption:4, Generative:3 },
        justification: "**Genuine Innovation**. Machine guns made linear tactics obsolete, created irreversible changes to military organization, and forced fundamental rethinking of infantry warfare.",
        sources: ["John Ellis, The Social History of the Machine Gun (1975)"]
      },
      "Military Robotics": {
        scores: { Cognitive:1, Irreversibility:2, Disruption:1, Generative:3 },
        justification: "**Modernization**. Military robotics extends human capabilities without fundamentally challenging operational assumptions. While catalytic in opening new conceptual spaces, conceptual disruption remains limited and strategic reconceptualization minimal.",
        sources: ["Peter W. Singer, Wired for War: The Robotics Revolution and Conflict in the 21st Century (2009)"]
      },
      "Minie Ball/Conoidal Bullet": {
        scores: { Cognitive:3, Irreversibility:3, Disruption:3, Generative:2 },
        justification: "**Genuine Innovation**. Minie ball made Napoleonic linear tactics untenable, created institutional resistance to reversion to close-order formations, and forced strategic assumptions about infantry effectiveness to be fundamentally questioned.",
        sources: ["Brent Nosworthy, The Bloody Crucible of Courage: Fighting Methods and Combat Experience of the American Civil War (2003)"]
      },
      "Multi-Domain Battle Concept": {
        scores: { Cognitive:2, Irreversibility:1, Disruption:2, Generative:3 },
        justification: "**Modernization**. Multi-Domain Operations challenges some stovepiped assumptions but remains conceptually emergent. Limited institutional embedding and incomplete strategic reconceptualization.",
        sources: ["U.S. Army TRADOC Pamphlet 525-3-1"]
      },
      "Network-Centric Warfare": {
        scores: { Cognitive:4, Irreversibility:2, Disruption:3, Generative:4 },
        justification: "**Genuine Innovation**. NCW represents a classic case of conceptual innovation preceding technological capability. Despite implementation failures due to institutional resistance, it has irreversibly set military thinking on a path toward network-centric operations.",
        sources: ["David S. Alberts, John J. Garstka, & Frederick P. Stein, Network Centric Warfare (1999)"]
      },
      "Nuclear Weapons": {
        scores: { Cognitive:4, Irreversibility:4, Disruption:4, Generative:4 },
        justification: "**Genuine Innovation**. Nuclear weapons represent complete transformation across all dimensions. Fundamentally redefined warfare, strategy, and international relations.",
        sources: ["Lawrence Freedman, The Evolution of Nuclear Strategy (2003)"]
      },
      "PGMs": {
        scores: { Cognitive:1, Irreversibility:2, Disruption:2, Generative:3 },
        justification: "**Modernization**. Precision-guided munitions enhance existing paradigms without fundamental challenge to operational assumptions. While catalytic in enabling new targeting concepts, strategic reconceptualization remains limited.",
        sources: ["Richard P. Hallion, Precision-Guided Munitions and the Revolution in Warfare (1995)"]
      },
      "Radar": {
        scores: { Cognitive:2, Irreversibility:3, Disruption:3, Generative:3 },
        justification: "**Genuine Innovation**. Radar transformed air warfare by making surprise attacks much harder. Created permanent changes in air defense thinking and organization.",
        sources: ["David E. Fisher, A Race on the Edge of Time: Radar (1988)"]
      },
      "Stealth": {
        scores: { Cognitive:1, Irreversibility:2, Disruption:2, Generative:2 },
        justification: "**Modernization**. Stealth improves existing air warfare capabilities but operates within established paradigms. Limited fundamental changes to military thinking.",
        sources: ["Bill Sweetman, Stealth Aircraft: Secrets of Future Airpower (1986)"]
      },
      "Stirrups": {
        scores: { Cognitive:4, Irreversibility:4, Disruption:4, Generative:4 },
        justification: "**Genuine Innovation**. Stirrups achieved complete paradigmatic transformation. Made infantry-centric assumptions untenable, created irreversible organizational DNA changes through feudal military structures, enabled previously impossible shock cavalry concepts.",
        sources: ["Lynn White, Jr., Medieval Technology and Social Change (1962)"]
      },
      "Stosstrupp Tactics": {
        scores: { Cognitive:4, Irreversibility:3, Disruption:4, Generative:3 },
        justification: "**Genuine Innovation**. Stosstrupp tactics made linear assault assumptions completely untenable and demanded strategic logic reconceptualization around infiltration principles. Created institutional resistance to reversion to rigid formations.",
        sources: ["Bruce I. Gudmundsson, Stormtroop Tactics: Innovation in the German Army, 1914-1918 (1989)"]
      },
      "T-72B3M Main Battle Tank": {
        scores: { Cognitive:0, Irreversibility:1, Disruption:0, Generative:1 },
        justification: "**Upgradation**. Modernized tank systems enhance performance within existing armored warfare paradigms. No conceptual disruption or strategic reconceptualization—simply improved execution of established tank concepts.",
        sources: ["Charles K. Bartles, The Russian Army: New Military Capability (2015)"]
      },
      "Tank": {
        scores: { Cognitive:4, Irreversibility:4, Disruption:4, Generative:4 },
        justification: "**Genuine Innovation**. Tanks completely transformed land warfare, created irreversible organizational changes, and fundamentally changed military thinking about mobility and firepower.",
        sources: ["J.P. Harris, Men, Ideas, and Tanks (1995)"]
      },
      "Telegraph": {
        scores: { Cognitive:4, Irreversibility:4, Disruption:4, Generative:4 },
        justification: "**Genuine Innovation**. Telegraph achieved complete paradigmatic transformation. Made courier-based command assumptions untenable, created irreversible systemic dependencies on communication networks, enabled previously impossible command and control concepts.",
        sources: ["David Hochfelder, The Telegraph in America, 1832–1920 (2012)"]
      },
      "UAVs": {
        scores: { Cognitive:1, Irreversibility:2, Disruption:1, Generative:3 },
        justification: "**Modernization**. UAVs extend existing reconnaissance and strike paradigms without fundamental challenge to operational assumptions. While catalytic in opening new operational concepts, conceptual disruption remains limited.",
        sources: ["Peter W. Singer, Wired for War: The Robotics Revolution and Conflict in the 21st Century (2009)"]
      }
    };

    // ===== Charts =====
    function RadarChart({scores}) {
      const ref = useRef(null);
      const chart = useRef(null);
      const values = useMemo(() => ORDER.map(k => +scores[k] || 0), [scores]);

      useEffect(() => {
        const ctx = ref.current.getContext('2d');
        if (chart.current) chart.current.destroy();
        chart.current = new Chart(ctx, {
          type: 'radar',
          data: {
            labels: DIMS.map(d => d.label),
            datasets: [
              {
                label: 'Current',
                data: values,
                fill: true,
                backgroundColor: 'rgba(37,99,235,0.2)',
                borderColor: 'rgba(37,99,235,1)',
                borderWidth: 2,
                pointRadius: 3
              },
              {
                label: 'Threshold (C≥2, I≥2)',
                data: [2,2,2,2],  // four axes
                fill: false,
                borderColor: 'rgba(107,114,128,0.8)',
                borderDash: [6, 4],
                borderWidth: 1,
                pointRadius: 0
              }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { position: 'top' } },
            scales: {
              r: {
                beginAtZero: true,
                min: 0,
                max: 4,
                ticks: { stepSize: 1 }
              }
            }
          }
        });
        return () => { if (chart.current) chart.current.destroy(); };
      }, [values]);

      return <div style={{height:"400px"}}><canvas ref={ref}/></div>;
    }

    function BarChart({scores}){
      const ref=useRef(null), chart=useRef(null);
      const values = useMemo(()=> ORDER.map(k => +scores[k]||0), [scores]);
      const colorFor=v=> v>=3?'rgba(22,163,74,0.7)':v>=2?'rgba(234,179,8,0.8)':'rgba(239,68,68,0.8)';
      useEffect(()=>{
        const ctx=ref.current.getContext('2d');
        if(chart.current) chart.current.destroy();
        chart.current=new Chart(ctx,{
          type:'bar',
          data:{labels:DIMS.map(d=>d.label),
                datasets:[{label:'Score',data:values,backgroundColor:values.map(colorFor)}]},
          options:{responsive:true,plugins:{legend:{display:false}},
                   scales:{y:{beginAtZero:true,min:0,max:4,ticks:{stepSize:1}}}}
        });
        return ()=> chart.current && chart.current.destroy();
      },[values]);
      return <canvas ref={ref} height={360} className="w-full"/>;
    }

    function ChartsPanel({scores,meta}){
      return (
        <div className="grid md:grid-cols-2 gap-6">
          <div className="panel">
            <div className="panel-h">Radar</div>
            <div className="panel-b"><RadarChart scores={scores}/></div>
          </div>
          <div className="panel">
            <div className="panel-h">Bar (color-coded)</div>
            <div className="panel-b"><BarChart scores={scores}/></div>
          </div>
          <div className="md:col-span-2 panel panel-b text-sm">
            <div className="flex flex-wrap items-center gap-4">
              <div><span className="font-semibold">Index:</span> {indexScore(scores)}</div>
              <div><span className="font-semibold">Class:</span> {classify(scores)}</div>
              <div>{thresholdOK(scores)
                ? <span className="badge bg-green-100 text-green-800">Threshold met (C≥2 & I≥2)</span>
                : <span className="badge bg-yellow-100 text-yellow-800">Threshold not met</span>}</div>
              {meta?.label && <div className="text-gray-600">Case: <span className="font-medium">{meta.label}</span></div>}
            </div>
          </div>
        </div>
      );
    }

    // ===== Shared sub-indicator renderer =====
    function SubPanel({dim, values, setValue, locked=false}) {
      const items = SUBS[dim];
      const rated = items.filter(it => (values[it.k]||0) > 0).length;
      const agg = meanToInt(items.map(it => values[it.k]||0));
      return (
        <div className="panel">
          <div className="panel-h flex items-center justify-between">
            <div>
              <div className="font-semibold">{DIMS.find(d=>d.key===dim).label}</div>
              <div className="hint">{DIMS.find(d=>d.key===dim).def}</div>
            </div>
            <div className="text-sm text-gray-600">{rated}/4 rated</div>
          </div>
          <div className="panel-b">
            {items.map(it=>(
              <div key={it.k} className="item-row">
                <div className="flex items-center justify-between">
                  <div className="font-medium text-sm">{it.name}</div>
                  <div className="text-xs text-gray-600">{values[it.k]||0}/4</div>
                </div>
                <div className="hint">{it.hint}</div>
                {locked ? (
                  <>
                    <div className="mt-2 meter"><div className="meter-fill" style={{width: `${((values[it.k]||0)/4)*100}%`}}></div></div>
                    <div className="text-[10px] text-gray-500 mt-1">Locked from historical case</div>
                  </>
                ) : (
                  <input type="range" min="0" max="4" value={values[it.k]||0}
                         onChange={e=> setValue(it.k, Number(e.target.value))}
                         className="w-full mt-2"/>
                )}
              </div>
            ))}
            <div className="mt-3 text-sm">
              <span className="font-medium">Derived {dim} score:</span> {agg}
            </div>
          </div>
        </div>
      );
    }

    // ===== Historical Examples (dropdown + locked sub-panels) =====
    function HistoricalExamples({setScores,setMeta}){
      const keys=Object.keys(EXAMPLES);
      const [sel,setSel]=useState("");
      const [subs,setSubs]=useState(null);

      const buildSubFromExample = (ex) => {
        const s = {};
        DIMS.forEach(d=>{
          const val = ex.scores[d.key]||0;
          const arr = ex.sub && Array.isArray(ex.sub[d.key]) && ex.sub[d.key].length===4
            ? ex.sub[d.key]
            : [val,val,val,val];
          const keys = SUBS[d.key].map(item=>item.k);
          keys.forEach((k,i)=> s[k] = arr[i]);
        });
        return s;
      };

      const load=()=>{
        if(!sel) return;
        const ex = EXAMPLES[sel];
        setMeta({label: sel});
        const subVals = buildSubFromExample(ex);
        const dimScores = {
          Disruption:      meanToInt([subVals.d1,subVals.d2,subVals.d3,subVals.d4]),
          Irreversibility: meanToInt([subVals.i1,subVals.i2,subVals.i3,subVals.i4]),
          Cognitive:       meanToInt([subVals.c1,subVals.c2,subVals.c3,subVals.c4]),
          Generative:      meanToInt([subVals.g1,subVals.g2,subVals.g3,subVals.g4]),
        };
        setSubs(subVals);
        setScores(dimScores);
      };

      const ex = sel ? EXAMPLES[sel] : null;

      return (
        <div className="space-y-6">
          <div>
            <h2 className="text-2xl font-semibold">Historical Examples</h2>
            <p className="italic text-sm text-gray-600 mt-1">
              Select a case from the dropdown, study its scaffolded sub-indicators, then click “Load Example into Charts” to visualize the aggregated C/I/D/G scores.
            </p>
          </div>

          <div className="flex flex-wrap items-center gap-3">
            <label className="text-sm font-medium">Example</label>
            <select value={sel} onChange={e=>{setSel(e.target.value); setSubs(null);}} className="border rounded-md px-3 py-2 text-sm min-w-[18rem]">
              <option value="">— choose a case —</option>
              {keys.map(k=><option key={k} value={k}>{k}</option>)}
            </select>
            <button onClick={load} className="px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50" disabled={!sel}>
              Load Example into Charts
            </button>
          </div>

          {ex && (
            <div className="grid md:grid-cols-2 gap-6">
              {["Disruption","Irreversibility","Cognitive","Generative"].map(dim=>{
                const subVals = subs ?? (()=> {
                  const seed = {};
                  const v = ex.scores[dim]||0;
                  SUBS[dim].forEach(it => seed[it.k]=v);
                  return seed;
                })();
                const pick = Object.fromEntries(SUBS[dim].map(it => [it.k, subVals[it.k]]));
                const dummySet = ()=>{};
                return <SubPanel key={dim} dim={dim} values={pick} setValue={dummySet} locked={true} />;
              })}
              <div className="md:col-span-2 panel panel-b text-sm">
                <div className="font-semibold mb-1">Explanation & References</div>
                <div className="text-gray-700 mb-3">{ex.justification}</div>
                {(ex.sources||[]).map((r,i)=>(<div key={i}>• {r}</div>))}
              </div>
            </div>
          )}
        </div>
      );
    }

    // ===== Test Your Idea (interactive scaffold) =====
    function TestYourIdea(){
      const [label,setLabel]=useState("");
      const [sub,setSub]=useState({
        d1:0,d2:0,d3:0,d4:0,
        i1:0,i2:0,i3:0,i4:0,
        c1:0,c2:0,c3:0,c4:0,
        g1:0,g2:0,g3:0,g4:0
      });

      const dimScores = {
        Disruption:      meanToInt([sub.d1,sub.d2,sub.d3,sub.d4]),
        Irreversibility: meanToInt([sub.i1,sub.i2,sub.i3,sub.i4]),
        Cognitive:       meanToInt([sub.c1,sub.c2,sub.c3,sub.c4]),
        Generative:      meanToInt([sub.g1,sub.g2,sub.g3,sub.g4]),
      };

      const setValue = (k,v)=> setSub(s=>({...s,[k]:v}));

      return (
        <div className="space-y-6">
          <div className="panel panel-b">
            <div className="flex flex-col md:flex-row md:items-end md:justify-between gap-4">
              <div>
                <h2 className="text-2xl font-semibold">Test Your Idea</h2>
                <p className="italic text-sm text-gray-600">
                  Adjust the four sub-indicators under each dimension. The tool averages them to derive C/I/D/G for visualization. Justify choices outside the tool.
                </p>
              </div>
              <div className="flex items-center gap-3">
                <label className="text-sm font-medium">Case title</label>
                <input value={label} onChange={e=>setLabel(e.target.value)}
                       className="border rounded-md px-3 py-2 text-sm w-72" placeholder="e.g., AI-enabled fires deconfliction"/>
              </div>
            </div>

            <div className="mt-5 grid md:grid-cols-2 gap-6">
              {["Disruption","Irreversibility","Cognitive","Generative"].map(dim=>{
                const pick = Object.fromEntries(SUBS[dim].map(it => [it.k, sub[it.k]]));
                return <SubPanel key={dim} dim={dim} values={pick} setValue={setValue} locked={false} />;
              })}
            </div>
          </div>

          <ChartsPanel scores={dimScores} meta={{label}}/>
        </div>
      );
    }

    // ===== Tabs + Legend =====
    function Tabs({tab,setTab}){
      const items=[
        {k:'examples',label:'Historical Examples'},
        {k:'charts',label:'Charts'},
        {k:'test',label:'Test Your Idea'}
      ];
      return (
        <div className="big-tabs">
          {items.map(t=>(
            <button key={t.k} onClick={()=>setTab(t.k)}
              className={`big-tab ${tab===t.k?'big-tab-active':'big-tab-inactive'}`}>{t.label}</button>
          ))}
        </div>
      );
    }

    function Legend(){
      return (
        <div className="panel panel-b text-sm">
          <div className="font-semibold mb-2">Scoring Legend</div>
          <ul className="list-disc list-inside text-gray-700 space-y-1">
            <li><b>0</b> = None</li>
            <li><b>1</b> = Minimal impact</li>
            <li><b>2</b> = Limited but measurable impact</li>
            <li><b>3</b> = Significant impact</li>
            <li><b>4</b> = Transformative impact</li>
          </ul>
        </div>
      );
    }

    // ===== App =====
    function App(){
      const [tab,setTab]=useState('examples');
      const [scores,setScores]=useState({Cognitive:0,Irreversibility:0,Disruption:0,Generative:0});
      const [meta,setMeta]=useState({label:""});

      return (
        <main>
          <header className="text-center space-y-1 mb-4">
            <h1 className="text-4xl md:text-5xl font-extrabold text-gray-900">
              Military Innovation Assessment Framework
            </h1>
            <h2 className="text-xl md:text-2xl font-bold text-gray-800">
              A Four-Dimensional Recognition Tool
            </h2>
            <div className="italic text-md md:text-lg text-gray-700">
              Based on "Military Innovation: Between the Knowns and the Unknowns"
            </div>
            <div className="text-xs text-gray-500 mt-1">(c) Manabrata Guha, 2025</div>
          </header>

          <Tabs tab={tab} setTab={setTab}/>
          <Legend/>

          <section className="space-y-6">
            {tab==='examples' && (<><HistoricalExamples setScores={setScores} setMeta={setMeta}/><ChartsPanel scores={scores} meta={meta}/></>)}
            {tab==='charts' && (<ChartsPanel scores={scores} meta={meta}/>)}
            {tab==='test' && (<TestYourIdea/>)}
          </section>

          <footer className="mt-10 text-center text-xs text-gray-500">Single-file. Copy into your repo and open in a browser.</footer>
        </main>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
  </script>
</body>
</html>
