<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Military Innovation Assessment Framework ‚Äî Improved</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js" data-presets="react" defer></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .copy-button {transition: all .2s ease}
    .copy-button:hover {transform: translateY(-1px)}
    @media print { .no-print { display:none } }
    .score-badge{border-radius:9999px;padding:.25rem .75rem;font-weight:700;font-size:.85rem}
  </style>
</head>
<body class="bg-gray-50">
  <div id="root"></div>

  <script type="text/babel">
    const {useEffect,useMemo,useState} = React;

    // Utility helpers
    const clamp = (n,min,max)=>Math.max(min,Math.min(max,n));
    const cx = (...xs)=>xs.filter(Boolean).join(" ");

    const DIMENSIONS = {
      discontinuity: {
        name: "Discontinuity",
        description: "Breaks patterns rather than extending them",
        indicators: [
          "Enemy OODA disruption in exercises/warfare",
          "Break points in doctrinal evolution",
          "Shift in kill‚Äëchain topology",
          "Adversary scrambling to understand/counter"
        ]
      },
      irreversibility: {
        name: "Irreversibility",
        description: "Creates baseline conditions that persist",
        indicators: [
          "Sunk training pipelines + institutional restructuring",
          "Logistics/infrastructure path dependence",
          "Adversary compulsion to mirror/counter at scale",
          "Force‚Äëstructure changes beyond initial adopters"
        ]
      },
      generative: {
        name: "Generative Capacity",
        description: "Spawns follow‚Äëons across domains",
        indicators: [
          "Follow‚Äëon doctrines/capabilities within 5‚Äì10y",
          "Cross‚Äëdomain spillovers (land/sea/air/space/cyber)",
          "Budget migration away from legacy categories",
          "New capability categories in force planning"
        ]
      },
      cognitive: {
        name: "Cognitive Disruption",
        description: "Forces reconceptualization of problems",
        indicators: [
          "Doctrinal rewrites (not simple updates)",
          "PME syllabus changes with new concepts",
          "Wargame outcome reversals",
          "Senior guidance reframes success metrics"
        ]
      }
    };

    const EXAMPLES = {
      "Stirrups": {scores:{discontinuity:2,irreversibility:2,generative:2,cognitive:2}},
      "Mini√© Ball": {scores:{discontinuity:2,irreversibility:2,generative:1,cognitive:1}},
      "Machine Gun": {scores:{discontinuity:2,irreversibility:2,generative:2,cognitive:2}},
      "Tank": {scores:{discontinuity:2,irreversibility:2,generative:2,cognitive:2}},
      "Carrier Aviation": {scores:{discontinuity:2,irreversibility:2,generative:2,cognitive:2}},
      "Nuclear Weapons": {scores:{discontinuity:2,irreversibility:2,generative:2,cognitive:2}},
      "Blitzkrieg": {scores:{discontinuity:2,irreversibility:2,generative:2,cognitive:2}},
      "Stealth": {scores:{discontinuity:2,irreversibility:2,generative:1,cognitive:0}},
      "PGMs": {scores:{discontinuity:2,irreversibility:2,generative:2,cognitive:1}},
      "Network‚ÄëCentric Warfare": {scores:{discontinuity:2,irreversibility:2,generative:2,cognitive:1}},
      "UAVs": {scores:{discontinuity:1,irreversibility:2,generative:2,cognitive:1}},
      "Cyber Warfare": {scores:{discontinuity:2,irreversibility:2,generative:2,cognitive:2}},
      "ASBM": {scores:{discontinuity:2,irreversibility:2,generative:1,cognitive:2}},
      "Lasers": {scores:{discontinuity:2,irreversibility:1,generative:1,cognitive:1}},
      "Military Robotics": {scores:{discontinuity:1,irreversibility:2,generative:2,cognitive:1}},
      "AI Targeting": {scores:{discontinuity:1,irreversibility:1,generative:2,cognitive:1}},
      "Hypersonics": {scores:{discontinuity:1,irreversibility:1,generative:1,cognitive:1}}
    };

    function DecisionBadge({classification}){
      const map={
        "Genuine Innovation":"bg-green-600",
        "Watch Category":"bg-amber-600",
        "Modernization":"bg-slate-600"
      };
      return (<span class={cx("text-white px-3 py-1 rounded-full text-sm", map[classification])}>{classification}</span>);
    }

    function Range({label,value,onChange,id}){
      return (
        <div class="mt-3">
          <div class="flex justify-between text-sm">
            <label htmlFor={id} class="font-medium text-gray-800">{label}</label>
            <span class="text-gray-600">{value}/2</span>
          </div>
          <input id={id} type="range" min="0" max="2" step="1" value={value}
            onChange={e=>onChange(parseInt(e.target.value))}
            class="w-full accent-indigo-600" aria-label={`${label} score`} />
          <div class="flex justify-between text-xs text-gray-500"><span>0</span><span>1</span><span>2</span></div>
        </div>
      )
    }

    function usePersistedState(key, initial){
      const [state,setState]=useState(()=>{
        try{const raw=localStorage.getItem(key);return raw?JSON.parse(raw):initial}catch{return initial}
      });
      useEffect(()=>{try{localStorage.setItem(key,JSON.stringify(state))}catch{}},[key,state]);
      return [state,setState];
    }

    function App(){
      const [capability,setCapability] = usePersistedState("capability","");
      const [research,setResearch] = usePersistedState("research","");
      const [scores,setScores] = usePersistedState("scores",{discontinuity:0,irreversibility:0,generative:0,cognitive:0});
      const [copied,setCopied] = useState(false);

      const total = useMemo(()=>Object.values(scores).reduce((a,b)=>a+b,0),[scores]);
      const meetsGate = (scores.irreversibility>=1 || scores.cognitive>=1);
      const classification = useMemo(()=>{
        if (total>=6 && meetsGate) return "Genuine Innovation";
        if (total>=4) return "Watch Category";
        return "Modernization";
      },[total,meetsGate]);

      const recommendation = useMemo(()=>{
        if (classification==="Genuine Innovation") return "Prioritize funding and doctrine development";
        if (classification==="Watch Category") return "Monitor, prototype selectively, collect evidence";
        return "Treat as modernization; fund incremental improvements";
      },[classification]);

      function loadExample(k){
        const ex = EXAMPLES[k];
        setCapability(k);
        setScores(ex.scores);
      }

      function reset(){
        setCapability("");
        setResearch("");
        setScores({discontinuity:0,irreversibility:0,generative:0,cognitive:0});
      }

      const prompt = useMemo(()=>{
        if(!capability || !research) return "";
        return `You are a senior military analyst. Assess a proposed capability with a four‚Äëdimension framework.\n\nSTUDENT CAPABILITY:\n${capability}\n\nRESEARCH CONTEXT (quotes/excerpts pasted by student):\n${research}\n\nTASK: Score 0‚Äì2 for each dimension and justify with quoted evidence.\n\n1) DISCONTINUITY ‚Äî Does it break existing patterns?\nIndicators: ${DIMENSIONS.discontinuity.indicators.join('; ')}\n\n2) IRREVERSIBILITY ‚Äî Does it create persistent baselines?\nIndicators: ${DIMENSIONS.irreversibility.indicators.join('; ')}\n\n3) GENERATIVE CAPACITY ‚Äî Does it spawn follow‚Äëons across domains?\nIndicators: ${DIMENSIONS.generative.indicators.join('; ')}\n\n4) COGNITIVE DISRUPTION ‚Äî Does it force reconceptualization?\nIndicators: ${DIMENSIONS.cognitive.indicators.join('; ')}\n\nOUTPUT FORMAT:\nASSESSMENT: "${capability}"\nDIMENSION SCORES: d, i, g, c; Total/8\nRATIONALE: evidence‚Äëbased per dimension\nFINAL CLASSIFICATION (rule: total ‚â• 6 AND (Irreversibility ‚â• 1 OR Cognitive ‚â• 1))\nOVERALL ASSESSMENT + RECOMMENDATIONS\nCRITICAL EVALUATION: gaps and further evidence.`
      },[capability,research]);

      function copyPrompt(){
        if(!prompt) return;
        navigator.clipboard.writeText(prompt).then(()=>{setCopied(true);setTimeout(()=>setCopied(false),1600)});
      }

      function exportJSON(){
        const blob = new Blob([JSON.stringify({capability,research,scores,total,classification},null,2)],{type:'application/json'});
        const url = URL.createObjectURL(blob); const a = document.createElement('a');
        a.href = url; a.download = 'innovation-assessment.json'; a.click(); URL.revokeObjectURL(url);
      }

      function exportCSV(){
        const headers = ['capability','discontinuity','irreversibility','generative','cognitive','total','classification'];
        const row = [capability,scores.discontinuity,scores.irreversibility,scores.generative,scores.cognitive,total,classification];
        const csv = headers.join(',')+'\n'+row.join(',');
        const blob = new Blob([csv],{type:'text/csv'}); const url = URL.createObjectURL(blob);
        const a=document.createElement('a'); a.href=url; a.download='innovation-assessment.csv'; a.click(); URL.revokeObjectURL(url);
      }

      return (
        <div class="max-w-7xl mx-auto p-6">
          <header class="mb-6 text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900">Military Innovation Assessment Framework</h1>
            <p class="text-gray-600 mt-1">Four‚Äëdimension recognition tool to separate innovation from modernization</p>
          </header>

          <div class="grid grid-cols-1 xl:grid-cols-3 gap-6">
            {/* Main */}
            <section class="xl:col-span-2 space-y-6">
              {/* Student workflow */}
              <div class="bg-white rounded-lg shadow p-6">
                <div class="flex items-center gap-2 mb-4"><span aria-hidden>üéì</span><h2 class="text-xl font-semibold">Student Assessment Workflow</h2></div>
                <div class="space-y-6">
                  <div>
                    <h3 class="font-semibold">Step 1: Propose your innovation</h3>
                    <input aria-label="Proposed capability" class="mt-2 w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-600" placeholder="e.g., AI‚Äëpowered drone swarms" value={capability} onChange={e=>setCapability(e.target.value)} />
                  </div>
                  <div>
                    <h3 class="font-semibold">Step 2: Paste research findings</h3>
                    <p class="text-sm text-gray-600">Paste 3‚Äì5 paragraphs from credible sources. Quote directly.</p>
                    <textarea aria-label="Research excerpts" class="mt-2 w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-emerald-600" rows="7" value={research} onChange={e=>setResearch(e.target.value)} placeholder="Key excerpts with citations‚Ä¶" />
                  </div>
                  <div>
                    <h3 class="font-semibold">Step 3: Dimension scoring</h3>
                    <div class="grid md:grid-cols-2 gap-4 mt-2">
                      {Object.entries(DIMENSIONS).map(([k,d])=> (
                        <div key={k} class="border rounded-lg p-4">
                          <div class="flex items-start justify-between">
                            <div>
                              <div class="font-semibold">{d.name}</div>
                              <div class="text-sm text-gray-600">{d.description}</div>
                            </div>
                            <span class="score-badge bg-gray-100 text-gray-800" aria-live="polite">{scores[k]}/2</span>
                          </div>
                          <Range id={`rng-${k}`} label={d.name} value={scores[k]} onChange={(v)=>setScores({...scores,[k]:clamp(v,0,2)})} />
                          <details class="mt-3 text-sm">
                            <summary class="cursor-pointer text-indigo-700">Observable indicators</summary>
                            <ul class="mt-2 list-disc list-inside text-gray-700 space-y-1">
                              {d.indicators.map((it,idx)=>(<li key={idx}>{it}</li>))}
                            </ul>
                          </details>
                        </div>
                      ))}
                    </div>
                  </div>
                </div>
              </div>

              {/* Prompt + exports */}
              <div class="bg-white rounded-lg shadow p-6">
                <div class="flex items-center justify-between gap-3 flex-wrap">
                  <h2 class="text-xl font-semibold">Assessment prompt</h2>
                  <div class="no-print flex gap-2">
                    <button onClick={copyPrompt} disabled={!prompt} class={cx("copy-button px-4 py-2 rounded-md text-white", prompt?"bg-orange-600 hover:bg-orange-700":"bg-gray-400 cursor-not-allowed")}>{copied?"Copied":"Copy"}</button>
                    <button onClick={exportJSON} class="px-4 py-2 rounded-md bg-slate-800 text-white">Export JSON</button>
                    <button onClick={exportCSV} class="px-4 py-2 rounded-md bg-slate-600 text-white">Export CSV</button>
                    <button onClick={()=>window.print()} class="px-4 py-2 rounded-md bg-slate-500 text-white">Print</button>
                  </div>
                </div>
                <div class="mt-3 bg-gray-50 border rounded p-4 max-h-80 overflow-auto">
                  <pre class="whitespace-pre-wrap text-sm">{prompt || "Enter a capability and research to generate the prompt."}</pre>
                </div>
              </div>

              {/* Final classification */}
              <div class="bg-white rounded-lg shadow p-6">
                <h2 class="text-xl font-semibold mb-4">Final assessment</h2>
                <div class="flex items-center gap-3 mb-2">
                  <DecisionBadge classification={classification} />
                  <div class="text-gray-700">Total: <span class="font-semibold">{total}/8</span></div>
                </div>
                <div class="w-full bg-gray-200 h-3 rounded overflow-hidden" aria-label="Score progress" role="progressbar" aria-valuemin="0" aria-valuemax="8" aria-valuenow={total}>
                  <div class="h-3 bg-indigo-600" style={{width: `${(total/8)*100}%`}}></div>
                </div>
                <p class="mt-3 text-sm text-gray-700"><span class="font-medium">Gate:</span> Irreversibility ‚â• 1 OR Cognitive ‚â• 1 ‚Üí { (scores.irreversibility>=1||scores.cognitive>=1)?"passed":"failed" }</p>
                <p class="mt-2 text-gray-800"><span class="font-semibold">Recommendation:</span> {recommendation}</p>
              </div>
            </section>

            {/* Sidebar */}
            <aside class="xl:col-span-1 space-y-6">
              <div class="bg-white rounded-lg shadow p-6 sticky top-6">
                <div class="flex items-center gap-2 mb-4"><span aria-hidden>‚öôÔ∏è</span><h2 class="text-xl font-semibold">Framework details</h2></div>
                <div class="space-y-4">
                  {Object.entries(DIMENSIONS).map(([k,d])=> (
                    <div key={k}>
                      <div class="font-semibold">{d.name}</div>
                      <p class="text-sm text-gray-600">{d.description}</p>
                      <p class="text-xs text-gray-500 mt-1"><span class="font-medium">Indicators:</span> {d.indicators.join('; ')}</p>
                    </div>
                  ))}
                </div>
                <div class="mt-6 grid grid-cols-2 gap-2">
                  {Object.keys(EXAMPLES).map(k=> (
                    <button key={k} onClick={()=>loadExample(k)} class="px-2 py-1 text-xs border rounded hover:bg-indigo-50">{k}</button>
                  ))}
                </div>
                <button onClick={reset} class="mt-6 w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 rounded-md no-print">Reset</button>
              </div>
            </aside>
          </div>

          <footer class="mt-8 text-center text-xs text-gray-500">
            Based on the working paper ‚ÄúThe Innovation Delusion: How Conceptual Confusion Undermines Military Strategy‚Äù.
          </footer>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App/>);
  </script>
</body>
</html>
